cmake_minimum_required(VERSION 3.10)
project(v4kem_project C)

set(CMAKE_C_STANDARD 99)

# ì†ŒìŠ¤ íŒŒì¼ ëª©ë¡
set(SOURCES
    src/v4kem.c
    src/mlwe.c
    src/puf.c
    src/sram_puf.c
    src/sha3.c
    src/randombytes.c
    src/kdf.c
    src/verify.c
    wrapper/mlkem_compat.c
)

# include ë””ë ‰í† ë¦¬ ì¶”ê°€
include_directories(include)

# OpenSSL ì°¾ê¸°
find_package(OpenSSL REQUIRED)
include_directories(${OPENSSL_INCLUDE_DIR})

# ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„±
add_library(v4kem STATIC ${SOURCES})

# ğŸ”— OpenSSL ë§í¬
target_link_libraries(v4kem ${OPENSSL_LIBRARIES})

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰íŒŒì¼ ìƒì„±
add_executable(test_v4kem tests/test_v4kem.c)

# ì‹¤í–‰íŒŒì¼ì— v4kem ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ OpenSSL ë§í¬
target_link_libraries(test_v4kem v4kem ${OPENSSL_LIBRARIES})